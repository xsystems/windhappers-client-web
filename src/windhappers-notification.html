<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="windhappers-styles.html">

<dom-module id="windhappers-notification">
  <template>
    <style include="windhappers-styles">
      paper-material {
        @apply(--layout-horizontal);
        width: 100%;
        background-color: inherit;
      }

      #bar {
        width: 0.25em;
      }

      #main {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-flex);
        padding: 1%;
      }

      #content {
        @apply(--layout-flex);
        @apply(--body1);
        margin-left: 1%;
        margin-right: 1%;
      }

      #content ::content > ul {
        margin: 0;
        padding-left: 15px;
      }

      @supports (-ms-ime-align:auto) {
        #main {
          padding: 0.8em;
        }
        #content {
          margin-left: 0.8em;
          margin-right: 0.8em;
        }
      }

      @-moz-document url-prefix() {
        #main {
          padding: 0.8em;
        }
        #content {
          margin-left: 0.8em;
          margin-right: 0.8em;
        }
      }

      :host[type="info"] #bar {
        background-color: var(--paper-blue-500);
      }

      :host[type="warning"] #bar {
        background-color: var(--paper-amber-500);
      }

      :host[type="error"] #bar {
        background-color: var(--paper-red-500);
      }

      :host[type="info"] #icon-notification {
        --iron-icon-fill-color: var(--paper-blue-500);
      }

      :host[type="warning"] #icon-notification {
        --iron-icon-fill-color: var(--paper-amber-500);
      }

      :host[type="error"] #icon-notification {
        --iron-icon-fill-color: var(--paper-red-500);
      }
    </style>
    <paper-material elevation="1">
      <div id="bar"></div>
      <div id="main">
        <iron-icon id="icon-notification" icon="[[_icon]]"></iron-icon>
        <div id="content">
          <content></content>
        </div>
        <template is="dom-if" if="[[removable]]">
          <paper-icon-button icon="close" on-tap="remove"></paper-icon-button>
        </template>
      </div>
    </paper-material>
  </template>
  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'windhappers-notification',

        properties: {
          type: String,
          removable: Boolean,
          _icon: {
            type: String,
            computed: '_computeIcon(type)'
          }
        },

        remove: function() {
          Polymer.dom(this).parentNode.removeChild(this);
        },

        _computeIcon: function(type) {
          if (type == "warning") {
            return "warning";
          } else if (type == "error") {
            return "error"
          } else {
            return "info"
          }
        }
      });
    })();
  </script>
</dom-module>
