<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-from-left-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/slide-right-animation.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-menu/paper-submenu.html">
<link rel="import" href="../../bower_components/xsystems-weather/xsystems-weather.html">
<link rel="import" href="../../bower_components/xsystems-weather/xsystems-weather-service-wunderground.html">

<link rel="import" href="pages/windhappers-page-home.html">
<link rel="import" href="pages/windhappers-page-disciplines.html">
<link rel="import" href="pages/windhappers-page-contact.html">
<link rel="import" href="pages/windhappers-page-costs.html">
<link rel="import" href="pages/windhappers-page-location.html">
<link rel="import" href="pages/windhappers-page-calendar.html">
<link rel="import" href="pages/windhappers-page-videos.html">
<link rel="import" href="pages/windhappers-page-photos.html">
<link rel="import" href="../../styles/shared-styles.html">

<dom-module id="windhappers-client-web">
  <template>

    <style include="shared-styles">
      neon-animated-pages, neon-animatable {
        @apply(--layout-vertical);
        @apply(--layout-flex);
      }

      app-header {
        color: #fff;
        --app-header-background-rear-layer: {
          background-color: var(--primary-color);
        };
        --app-header-background-front-layer: {
          background-image: url(../../images/header/header_default.jpg);
          background-position: left 55%;
        };
      }

      app-toolbar[sticky] {
        height: 56px;
      }

      app-toolbar:not([sticky]) {
        height: 56px;
      }

      [main-title] {
        padding-left: 10%;
        @apply(--display1);
      }

      [condensed-title] {
        @apply(--headline);
      }

      paper-menu {
        --paper-menu-selected-item: {
          color: var(--primary-color);
        }
      }

      paper-menu, paper-submenu paper-item {
        text-rendering: optimizeLegibility;
      }

      paper-submenu paper-menu {
        padding-left: 10%;
      }

      #drawerContent {
        @apply(--layout-vertical);
        height: 100%;
      }

      #menu {
        @apply(--layout-flex);
        overflow: auto;
      }

      #facebook {
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
      }

      xsystems-weather {
        margin: 6%;
      }
    </style>

    <app-location route="{{route}}"></app-location>

    <app-route  route="{{route}}"
                pattern="/:page"
                data="{{pageData}}"
                tail="{{pageTail}}"></app-route>

    <app-drawer-layout  fullbleed
                        narrow="{{narrow}}"
                        responsive-width="768px">
      <app-drawer id="drawer" swipe-open>
        <div id="drawerContent">
          <div id="menu">
            <paper-menu selectable="paper-item"
                        selected="{{pageData.page}}"
                        attr-for-selected="data-page">
              <paper-item data-page="home">Home</paper-item>
              <paper-item data-page="calendar">Kalender</paper-item>
              <paper-item data-page="disciplines">Disciplines</paper-item>
              <paper-submenu>
                <paper-item class="menu-trigger">Media</paper-item>
                <paper-menu class="menu-content"
                            selectable="paper-item"
                            selected="{{pageData.page}}"
                            attr-for-selected="data-page">
                  <paper-item data-page="photos">Foto's</paper-item>
                  <paper-item data-page="videos">Video's</paper-item>
                  <!-- <paper-item data-page="blogs">Blogs</paper-item> -->
                </paper-menu>
              </paper-submenu>
              <!-- <paper-item data-page="canoeroutes">Kanoroutes</paper-item> -->
              <paper-submenu id="menuSafety">
                <paper-item class="menu-trigger">Veiligheid</paper-item>
                <paper-menu class="menu-content">
                  <paper-item on-tap="_showPageWaterQuality">Waterkwaliteit</paper-item>
                  <paper-item on-tap="_showPageKNRM">KNRM App</paper-item>
                </paper-menu>
              </paper-submenu>
              <paper-submenu>
                <paper-item class="menu-trigger">Over ons</paper-item>
                <paper-menu class="menu-content"
                            selectable="paper-item"
                            selected="{{pageData.page}}"
                            attr-for-selected="data-page">
                  <paper-item data-page="contact">Contact</paper-item>
                  <paper-item data-page="location">Locatie</paper-item>
                  <paper-item data-page="costs">Kosten &amp; Inschrijven</paper-item>
                </paper-menu>
              </paper-submenu>
            </paper-menu>
          </div>

          <xsystems-weather-service-wunderground  key="d543a18b79ebf11a"
                                                  query="Netherlands/The_Hague"
                                                  data="{{forecast}}"></xsystems-weather-service-wunderground>
          <xsystems-weather data="[[forecast]]"></xsystems-weather>
        </div>
      </app-drawer>
      <app-header-layout fullbleed>
        <app-header fixed condenses effects="material">
          <app-toolbar sticky>
            <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
            <span condensed-title>De Windhappers</span>
            <a href="https://twitter.com/DeWindhappers" target="_blank">
              <iron-icon src="../../../images/social/twitter.png"></iron-icon>
            </a>
            <a href="http://www.facebook.com/pages/Kanovereniging-De-Windhappers/546877148674699" target="_blank">
              <iron-icon id="facebook" src="../../../images/social/facebook.png"></iron-icon>
            </a>
          </app-toolbar>
          <app-toolbar class="secondary">
            <span main-title>De Windhappers</span>
          </app-toolbar>
        </app-header>

        <neon-animated-pages selected="[[pageData.page]]"
                             attr-for-selected="data-page"
                             on-iron-resize="closeDrawer">
          <neon-animatable data-page="home">
            <windhappers-page-home narrow$="[[narrow]]"></windhappers-page-home>
          </neon-animatable>

          <neon-animatable data-page="calendar">
            <windhappers-page-calendar narrow$="[[narrow]]"></windhappers-page-calendar>
          </neon-animatable>

          <neon-animatable data-page="disciplines">
            <windhappers-page-disciplines narrow$="[[narrow]]" pattern="/disciplines" route="{{pageTail}}"></windhappers-page-disciplines>
          </neon-animatable>

          <neon-animatable data-page="photos">
            <windhappers-page-photos narrow$="[[narrow]]" route="{{pageTail}}"></windhappers-page-photos>
          </neon-animatable>

          <neon-animatable data-page="videos">
            <windhappers-page-videos narrow$="[[narrow]]" route="{{pageTail}}"></windhappers-page-videos>
          </neon-animatable>

          <neon-animatable data-page="contact">
            <windhappers-page-contact narrow$="[[narrow]]"></windhappers-page-contact>
          </neon-animatable>

          <neon-animatable data-page="location">
            <windhappers-page-location narrow$="[[narrow]]"></windhappers-page-location>
          </neon-animatable>

          <neon-animatable data-page="costs">
            <windhappers-page-costs narrow$="[[narrow]]"></windhappers-page-costs>
          </neon-animatable>
        </neon-animated-pages>
      </app-header-layout>
    </app-drawer-layout>

  </template>

  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'windhappers-client-web',

        properties: {
          narrow: {
            type: Boolean,
            notify: true,
            reflectToAttribute: true,
            value: false
          }
        },

        observers: [
          '_updateMenus(pageData.page)'
        ],

        attached: function() {
          this.async(function() {
            if (!this.route.path || this.route.path == '/') {
              this.set('route.path', '/home');
            }
          });
        },

        closeDrawer: function() {
          if (this.narrow) {
            this.$.drawer.close();
          }
        },

        _showPageWaterQuality: function() {
          window.open("http://zwemwater.nl/", "_blank");
        },

        _showPageKNRM: function() {
          window.open("https://www.knrm.nl/wat-doet-de-knrm/veiligheid-voor-pleziervaart/knrm-helpt-app/", "_blank");
        },

        _updateMenus: function(page) {
          if (this.$.menuSafety.opened) {
            this.$.menuSafety.close();
          }
        }
      })
    })();
  </script>
</dom-module>
