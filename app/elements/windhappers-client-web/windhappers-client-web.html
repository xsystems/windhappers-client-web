<link rel="import" href="pages/windhappers-page-home.html">
<link rel="import" href="pages/windhappers-page-disciplines.html">
<link rel="import" href="pages/windhappers-page-contact.html">
<link rel="import" href="pages/windhappers-page-costs.html">
<link rel="import" href="pages/windhappers-page-location.html">
<link rel="import" href="pages/windhappers-page-calendar.html">
<link rel="import" href="pages/windhappers-page-videos.html">

<dom-module id="windhappers-client-web">
  <template>
    
    <style>
      /* Breakpoints */

      /* Small */
      @media (max-width: 640px) {
        [title] {
          font-size: 30px;
        }

        [condensed-title] {
          font-size: 15px;
        }
      }

      /* Tablet+ */
      @media (min-width: 641px) {

      }

      app-header {
        position: fixed;
        top: 0;
        left: 0;
        color: #fff;
        --app-header-background-rear-layer: {
          background-color: var(--primary-color);
        };
        --app-header-background-front-layer: {
          background-image: url(../../images/header/header_default.jpg);
          background-position: left 66%;
        };
      }

      app-toolbar.primary {
        height: var(--toolbar-height-primary);
      }
              
      app-toolbar.secondary {
        height: var(--toolbar-height-secondary);
      }

      [title] {
        font-weight: lighter;
        margin: 0;
        position: absolute;
        left: 108px;
        bottom: 30%;
      }  

      [condensed-title] {
        font-weight: lighter;
        margin-left: 30px;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      [condensed-title] i {
        font-weight: 100;
        font-style: normal;
      }

      paper-menu {
        --paper-menu-selected-item: {
          color: var(--primary-color);
        }
      }

      paper-menu, paper-submenu paper-item { 
        text-rendering: optimizeLegibility;
      }

      paper-submenu paper-menu {
        padding-left: 10%;
      }

      #menu {
        height: 100%;
        overflow: auto;
      }

      neon-animated-pages {
        height: var(--page-height);
      }

      #facebook {
        --iron-icon-width: 16px;
        --iron-icon-height: 16px;
      }
    </style>

    <iron-media-query query="(max-width: 640px)" query-matches="{{narrow}}"></iron-media-query>

    <app-location route="{{route}}"></app-location>

    <app-route route="{{route}}"
                  pattern="/:page"
                  data="{{pageData}}"
                  tail="{{pageTail}}"></app-route>

    <app-drawer-layout>
      <app-drawer id="drawer" swipe-open>
        <paper-menu id="menu" on-iron-select="closeDrawer" selectable="paper-item" selected='{{pageData.page}}' attr-for-selected="data-page">
          <paper-item data-page="home">Home</paper-item>
          <paper-item data-page="calendar">Kalender</paper-item>
          <paper-submenu>
            <paper-item class="menu-trigger">Disciplines</paper-item>
            <paper-menu class="menu-content" selectable="paper-item" selected='{{pageData.page}}' attr-for-selected="data-page">
              <paper-item data-page="touring">Toervaren</paper-item>
              <paper-item data-page="canoepolo">Kanopolo</paper-item>
              <paper-item data-page="seafaring">Zeevaren</paper-item>
              <paper-item data-page="surffaring">Brandingvaren</paper-item>
              <paper-item data-page="whitewaterfaring">Wildwatervaren</paper-item>
            </paper-menu>
          </paper-submenu>
          <paper-submenu>
            <paper-item class="menu-trigger">Media</paper-item>
            <paper-menu class="menu-content" selectable="paper-item" selected='{{pageData.page}}' attr-for-selected="data-page">
              <paper-item data-page="photos">Foto's</paper-item>
              <paper-item data-page="videos">Video's</paper-item>
              <paper-item data-page="blogs">Blogs</paper-item>
            </paper-menu>
          </paper-submenu>
          <paper-item data-page="canoeroutes">Kanoroutes</paper-item>
          <paper-submenu>
            <paper-item class="menu-trigger">Veiligheid</paper-item>
            <paper-menu class="menu-content" selectable="paper-item" selected='{{pageData.page}}' attr-for-selected="data-page">
              <paper-item data-page="waterquality">Waterkwaliteit</paper-item>
              <paper-item data-page="knrm">KNRM</paper-item>
            </paper-menu>
          </paper-submenu>
          <paper-item data-page="meteorology">Meteorologie</paper-item>
          <paper-submenu>
            <paper-item class="menu-trigger">Over ons</paper-item>
            <paper-menu class="menu-content" selectable="paper-item" selected='{{pageData.page}}' attr-for-selected="data-page">
              <paper-item data-page="contact">Contact</paper-item>
              <paper-item data-page="location">Locatie</paper-item>
              <paper-item data-page="costs">Kosten &amp; Inschrijven</paper-item>
              <paper-item data-page="sponsors">Sponsoren</paper-item>
            </paper-menu>
          </paper-submenu>
        </paper-menu>
      </app-drawer>
      <app-header-layout>
        <app-header fixed condenses effects="material">
          <app-toolbar class="primary">
            <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
            <h4 condensed-title="">De Windhappers</h4>
            <a href="https://twitter.com/DeWindhappers" target="_blank">
              <iron-icon src="../../../images/social/twitter.png"></iron-icon>
            </a>
            <a href="http://www.facebook.com/pages/Kanovereniging-De-Windhappers/546877148674699" target="_blank">
              <iron-icon id="facebook" src="../../../images/social/facebook.png"></iron-icon>
            </a>
          </app-toolbar>
          <app-toolbar class="secondary">
            <h1 title="">De Windhappers</h1>
          </app-toolbar>
        </app-header>

        <neon-animated-pages selected="{{pageData.page}}"
                     attr-for-selected="data-page"
                     entry-animation="slide-from-left-animation"
                     exit-animation="slide-right-animation">
          <neon-animatable data-page="home">
            <windhappers-page-home></windhappers-page-home>
          </neon-animatable>
          <neon-animatable data-page="touring">
            <windhappers-page-disciplines></windhappers-page-disciplines>
          </neon-animatable>
          <neon-animatable data-page="contact">
            <windhappers-page-contact narrow="[[narrow]]"></windhappers-page-contact>
          </neon-animatable>          
          <neon-animatable data-page="location">
            <windhappers-page-location></windhappers-page-location>
          </neon-animatable>
          <neon-animatable data-page="costs">
            <windhappers-page-costs narrow="[[narrow]]"></windhappers-page-costs>
          </neon-animatable>
          <neon-animatable data-page="calendar">
            <windhappers-page-calendar narrow="[[narrow]]"></windhappers-page-calendar>
          </neon-animatable>
          <neon-animatable data-page="videos">
            <windhappers-page-videos narrow="[[narrow]]"></windhappers-page-videos>
          </neon-animatable>
        </neon-animated-pages>
      </app-header-layout>
    </app-drawer-layout>

  </template>

  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'windhappers-client-web',

        behaviors: [
          Polymer.IronResizableBehavior
        ],        

        properties: {
          narrow: Boolean
        },

        observers: [
          '_resetLayout(narrow, isAttached)'
        ],

        attached: function() {
          this.async(function() {
            if (!this.route.path || this.route.path == '/') {
              this.set('route.path', 'home');
            }
          });
        },

        _resetLayout: function() {
          this.debounce('_resetLayout', function() {
            if (!this.isAttached) {
              return;
            }

            if (this.narrow) {
              this.customStyle['--toolbar-height-primary'] = '64px';
              this.customStyle['--toolbar-height-secondary'] = '32px';
            } else {
              this.customStyle['--toolbar-height-primary'] = '64px';
              this.customStyle['--toolbar-height-secondary'] = '148px';
            }

            this.customStyle['--page-height'] = 'calc(100vh - var(--toolbar-height-primary) - var(--toolbar-height-secondary))';

            this.updateStyles();
            this.notifyResize();
          });        
        },

        closeDrawer: function() {
          if (this.narrow) {
            this.$.drawer.close();
          }
        }
      })
    })();
  </script>
</dom-module>
